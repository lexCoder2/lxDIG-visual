.app-shell {
  height: 100vh;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 0.4rem 0.6rem;
  box-sizing: border-box;
  background: var(--cv-bg);
  color: var(--cv-text);
  overflow: hidden;
}

.workspace-split {
  flex: 1;
  min-height: 0;
  height: 100%;
  display: grid;
  grid-template-columns: 7fr 5fr;
  gap: 0.6rem;
}

.canvas-pane {
  min-width: 0;
  min-height: 0;
  height: 100%;
  display: flex;
}

.node-viewer {
  min-width: 0;
  min-height: 0;
  height: 100%;
  border: 1px solid var(--cv-border-card);
  border-radius: 24px;
  background: linear-gradient(
    180deg,
    var(--cv-surface),
    var(--cv-surface-soft)
  );
  box-shadow: var(--cv-shadow-card);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.node-viewer-header {
  padding: 0.72rem 0.82rem 0.56rem;
  border-bottom: 1px solid var(--cv-border-soft);
  background: var(--cv-surface-overlay);
}

.node-viewer-header h2 {
  margin: 0;
  font-size: 0.94rem;
  line-height: 1.3;
}

.node-viewer-header p {
  margin: 0.16rem 0 0;
  font-size: 0.72rem;
  color: var(--cv-text-muted);
  word-break: break-all;
}

.viewer-content {
  flex: 1;
  min-height: 0;
  padding: 0.72rem 0.82rem 0.84rem;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  gap: 0.7rem;
}

.viewer-empty,
.viewer-error {
  margin: 0.75rem 0.82rem;
  border-radius: 12px;
  padding: 0.55rem 0.62rem;
  font-size: 0.74rem;
}

.viewer-empty {
  background: var(--cv-surface-tint);
  color: var(--cv-text-muted);
}

.viewer-error {
  background: rgba(240, 202, 202, 0.65);
  color: #8b3d3d;
}

.viewer-meta-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
}

.viewer-badge {
  border-radius: 999px;
  padding: 0.16rem 0.44rem;
  font-size: 0.66rem;
  border: 1px solid var(--cv-border-soft-strong);
  color: var(--cv-text-subtle);
  background: var(--cv-surface-tint);
}

.viewer-code-wrap {
  border: 1px solid var(--cv-border-soft);
  border-radius: 14px;
  overflow: hidden;
  background: var(--cv-surface-code);
}

.viewer-code-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.34rem 0.55rem;
  font-size: 0.66rem;
  color: var(--cv-text-muted);
  border-bottom: 1px solid var(--cv-border-soft);
  background: var(--cv-surface-code-meta);
}

.viewer-code {
  margin: 0;
  padding: 0.62rem;
  max-height: 58vh;
  overflow: auto;
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: 0.74rem;
  line-height: 1.45;
  white-space: pre;
  color: var(--cv-text-strong);
}

.viewer-code .hljs {
  display: block;
  color: var(--cv-text-strong);
  background: transparent;
}

.viewer-code .hljs-keyword,
.viewer-code .hljs-selector-tag,
.viewer-code .hljs-literal,
.viewer-code .hljs-built_in,
.viewer-code .hljs-meta .hljs-keyword {
  color: var(--cv-code-keyword);
}

.viewer-code .hljs-title,
.viewer-code .hljs-title.class_,
.viewer-code .hljs-title.function_,
.viewer-code .hljs-variable,
.viewer-code .hljs-attr,
.viewer-code .hljs-property {
  color: var(--cv-code-symbol);
}

.viewer-code .hljs-string,
.viewer-code .hljs-regexp,
.viewer-code .hljs-symbol,
.viewer-code .hljs-bullet,
.viewer-code .hljs-template-tag,
.viewer-code .hljs-template-variable {
  color: var(--cv-code-string);
}

.viewer-code .hljs-number,
.viewer-code .hljs-type,
.viewer-code .hljs-params,
.viewer-code .hljs-selector-class,
.viewer-code .hljs-selector-id {
  color: var(--cv-code-number);
}

.viewer-code .hljs-comment,
.viewer-code .hljs-quote,
.viewer-code .hljs-doctag {
  color: var(--cv-code-comment);
  font-style: italic;
}

.viewer-markdown {
  border: 1px solid var(--cv-border-soft);
  border-radius: 14px;
  background: var(--cv-surface-markdown);
  padding: 0.66rem 0.72rem;
  font-size: 0.78rem;
  color: var(--cv-text-subtle);
  line-height: 1.45;
}

.viewer-markdown h1,
.viewer-markdown h2,
.viewer-markdown h3 {
  margin: 0.42rem 0;
  line-height: 1.3;
}

.viewer-markdown p,
.viewer-markdown ul,
.viewer-markdown ol {
  margin: 0.4rem 0;
}

.viewer-folder-tree h3 {
  margin: 0 0 0.45rem;
  font-size: 0.8rem;
}

.viewer-folder-tree ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.viewer-folder-tree li {
  display: flex;
  align-items: center;
  gap: 0.36rem;
  font-size: 0.74rem;
  line-height: 1.35;
  margin: 0.14rem 0;
}

.viewer-folder-tree-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--cv-text-muted);
}

.viewer-markdown code {
  padding: 0.08rem 0.2rem;
  border-radius: 6px;
  background: var(--cv-surface-tint);
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size: 0.72rem;
}

.viewer-architecture {
  border: 1px solid var(--cv-border-soft);
  border-radius: 14px;
  background: var(--cv-surface-markdown);
  padding: 0.64rem 0.7rem;
}

.viewer-architecture h3 {
  margin: 0 0 0.45rem;
  font-size: 0.8rem;
}

.viewer-architecture-columns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.56rem;
}

.viewer-architecture-columns h4 {
  margin: 0 0 0.3rem;
  font-size: 0.72rem;
  color: var(--cv-text-muted);
}

.viewer-architecture-columns ul {
  margin: 0;
  padding-left: 1rem;
  font-size: 0.72rem;
  line-height: 1.35;
}

@media (max-width: 1180px) {
  .workspace-split {
    grid-template-columns: 1fr;
    grid-template-rows: minmax(0, 1fr) minmax(0, 1fr);
  }

  .node-viewer {
    min-height: 0;
    height: 100%;
  }
}

.app-header {
  max-height: 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
  padding: 0.35rem 0.55rem;
  border-radius: 14px;
  border: 1px solid var(--cv-border-control);
  background: var(--cv-glass);
  backdrop-filter: blur(8px) saturate(115%);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.app-header-title {
  margin: 0;
  font-size: 0.92rem;
  font-weight: 650;
  letter-spacing: 0.01em;
  white-space: nowrap;
}

.app-header-title-wrap {
  display: flex;
  align-items: center;
  gap: 0.38rem;
  min-width: 0;
}

.app-header-logo {
  flex-shrink: 0;
  display: block;
  filter: drop-shadow(1px 1.5px 2px rgba(55, 90, 185, 0.22));
}

.app-header-chip {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 0.12rem 0.42rem;
  font-size: 0.62rem;
  font-weight: 650;
  line-height: 1;
  border: 1px solid transparent;
  white-space: nowrap;
  box-shadow: var(--cv-shadow-chip);
}

.app-theme-toggle {
  border: 1px solid var(--cv-border-control);
  background: var(--cv-surface-strong);
  color: var(--cv-text);
  width: 1.68rem;
  height: 1.68rem;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  line-height: 1;
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.app-theme-toggle.on {
  border-color: var(--cv-focus-border);
  background: var(--cv-accent-grad);
  color: #f6f8ff;
}

.app-header-chip.connected {
  background: var(--cv-status-success-bg);
  border-color: var(--cv-status-success-border);
  color: var(--cv-status-success-text);
}

.app-header-chip.disconnected {
  background: var(--cv-status-danger-bg);
  border-color: var(--cv-status-danger-border);
  color: var(--cv-status-danger-text);
}

.app-header-chip.mock {
  background: var(--cv-status-warn-bg);
  border-color: var(--cv-status-warn-border);
  color: var(--cv-status-warn-text);
}

.node-type-filters {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  flex-wrap: wrap;
}

.canvas-controls-node-types {
  margin-left: auto;
  justify-content: flex-end;
  padding: 0.14rem 0.24rem;
  border-radius: 999px;
  background: var(--cv-surface-tint);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.canvas-controls-node-types .refresh-switch-wrap {
  background: var(--cv-surface-tint-strong);
  border-color: var(--cv-border-soft-strong);
  padding: 0.1rem 0.28rem;
  gap: 0.24rem;
}

.node-type-switch-label {
  text-transform: capitalize;
  color: #4d5c81;
  font-weight: 640;
}

.node-filter-group-label {
  font-size: 0.55rem;
  font-weight: 700;
  color: #5b6582;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  margin: 0 0.12rem 0 0.2rem;
}

.node-type-switch {
  width: 1.88rem;
  height: 1.02rem;
}

.node-type-switch.on {
  background: linear-gradient(
    180deg,
    rgba(187, 203, 247, 0.95),
    rgba(161, 182, 238, 0.94)
  );
  border-color: rgba(112, 136, 198, 0.42);
}

.node-type-switch.off {
  background: rgba(215, 223, 240, 0.88);
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.9rem;
  flex-wrap: wrap;
  padding: 0.65rem 0.75rem;
  border: 1px solid var(--cv-line);
  border-radius: 18px;
  background: var(--cv-surface-strong);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.75);
}

.topbar h1 {
  margin: 0;
  font-size: 1.02rem;
  letter-spacing: 0.01em;
  font-weight: 650;
}

.topbar p {
  margin: 0.22rem 0 0;
  opacity: 1;
  font-size: 0.76rem;
  color: var(--cv-text-muted);
}

.topbar-controls {
  display: flex;
  align-items: center;
  gap: 0.38rem;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.project-picker {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.72rem;
  color: var(--cv-text-muted);
  padding: 0.15rem 0.2rem;
}

.project-picker select {
  padding: 0.26rem 1.2rem 0.26rem 0.38rem;
  background-size: 0.78rem;
}

.project-picker select,
.project-control select,
.view-mode-select,
.mode-filter-select {
  background-color: var(--cv-surface-strong);
  color: var(--cv-text);
  border: 1px solid var(--cv-border-control);
  border-radius: 12px;
  font-size: 0.74rem;
  line-height: 1.2;
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 8l5 5 5-5' stroke='%23626f86' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.34rem center;
}

.refresh-switch-wrap {
  display: flex;
  align-items: center;
  gap: 0.32rem;
  border-radius: 999px;
  padding: 0.16rem 0.42rem;
  border: 1px solid var(--cv-border-control);
  background: var(--cv-surface-strong);
  color: var(--cv-text-muted);
  font-size: 0.68rem;
  font-weight: 600;
}

.refresh-switch {
  --switch-width: 2.05rem;
  --switch-height: 1.08rem;
  --switch-padding: 0.08rem;
  width: var(--switch-width);
  height: var(--switch-height);
  border-radius: 999px;
  border: 0;
  padding: var(--switch-padding);
  position: relative;
  transition: background-color 140ms linear;
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}
.refresh-switch.on {
  background: var(--cv-accent-grad);
  border-color: rgba(25, 112, 66, 0.22);
}
.refresh-switch.off {
  background: var(--cv-bg);
}

.refresh-switch-thumb {
  display: block;
  width: calc(var(--switch-height) - (var(--switch-padding) * 2));
  height: calc(var(--switch-height) - (var(--switch-padding) * 2));
  border-radius: 50%;
  background: var(--cv-surface-markdown);
  box-shadow: 2px 2px 6px rgba(94, 106, 131, 0.28);
  transform: translateX(0);
  transition: transform 140ms linear;
}

.refresh-switch.on .refresh-switch-thumb {
  transform: translateX(calc(var(--switch-width) - var(--switch-height)));
  border-color: rgba(141, 95, 24, 0.24);
}

.sync-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.26rem;
  border-radius: 999px;
  padding: 0.24rem 0.55rem;
  font-weight: 600;
  font-size: 0.68rem;
  border: 1px solid rgba(255, 255, 255, 0.65);
  background: var(--cv-surface-strong);
  color: var(--cv-text-muted);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.sync-badge.idle {
  border: 0;
  background: transparent;
  box-shadow: none;
  padding: 0.08rem 0.14rem;
}

.sync-badge .sync-label {
  font-size: 0.64rem;
  font-weight: 560;
  color: var(--cv-text-muted);
}

.sync-badge .sync-value {
  font-size: 0.62rem;
  font-weight: 650;
  line-height: 1;
  border-radius: 999px;
  padding: 0.1rem 0.34rem;
}

.sync-badge .sync-value.on {
  color: #356245;
  background: rgba(103, 178, 131, 0.16);
  border: 1px solid rgba(103, 178, 131, 0.3);
}

.sync-badge .sync-value.off {
  color: #6a7283;
  background: rgba(154, 164, 182, 0.14);
  border: 1px solid rgba(154, 164, 182, 0.26);
}

.sync-badge.syncing {
  background: var(--cv-white);
  border-color: rgba(63, 114, 189, 0.28);
  color: #3f679f;
}

.sync-badge.error {
  background: var(--cv-white);
  border-color: rgba(180, 72, 72, 0.28);
  color: #8f3e3e;
}

.refresh-toggle {
  border-radius: 999px;
  padding: 0.24rem 0.55rem;
  font-size: 0.68rem;
  font-weight: 600;
  border: 1px solid var(--cv-border-control);
  background: var(--cv-surface-strong);
  color: var(--cv-text);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.refresh-toggle.on {
  border-color: rgba(64, 94, 182, 0.32);
  background: var(--cv-accent-grad);
  color: #f6f8ff;
}

.refresh-toggle.off {
  border-color: rgba(116, 124, 141, 0.2);
  background: var(--cv-surface-strong);
  color: #626a7a;
}

.depth-controls {
  display: flex;
  align-items: center;
  gap: 0.2rem;
  padding: 0.12rem 0.22rem;
  border: 1px solid var(--cv-border-control);
  border-radius: 999px;
  background: var(--cv-surface-strong);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.depth-controls button {
  border: 1px solid var(--cv-border-control);
  background: var(--cv-surface-strong);
  color: var(--cv-text);
  border-radius: 999px;
  width: 1.42rem;
  height: 1.42rem;
  font-size: 0.74rem;
  line-height: 1;
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.depth-controls button:disabled {
  opacity: 0.42;
}

.depth-controls span {
  min-width: 3.6rem;
  text-align: center;
  font-size: 0.66rem;
  font-weight: 600;
  color: var(--cv-text-muted);
}

.motion-picker {
  display: flex;
  align-items: center;
  gap: 0.28rem;
  font-size: 0.72rem;
  padding: 0.16rem 0.36rem;
  border: 1px solid var(--cv-border-control);
  border-radius: 999px;
  background: var(--cv-surface-strong);
  color: var(--cv-text-muted);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.motion-picker .motion-range {
  width: 78px;
  appearance: none;
  -webkit-appearance: none;
  background: linear-gradient(
    to right,
    var(--cv-accent) 0%,
    var(--cv-accent) var(--motion-fill, 50%),
    var(--cv-muted-track) var(--motion-fill, 50%),
    var(--cv-muted-track) 100%
  );
  height: 0.28rem;
  border-radius: 999px;
  outline: none;
}

.motion-picker .motion-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 0;
  height: 0;
  opacity: 0;
}

.motion-picker .motion-range::-moz-range-thumb {
  width: 0;
  height: 0;
  opacity: 0;
  border: 0;
}

.motion-picker .motion-range::-moz-range-track {
  height: 0.28rem;
  border-radius: 999px;
  background: var(--cv-muted-track);
}

.motion-picker .motion-range::-moz-range-progress {
  height: 0.28rem;
  border-radius: 999px;
  background: var(--cv-accent);
}

.motion-picker span {
  min-width: 2rem;
  text-align: right;
  opacity: 0.9;
  color: var(--cv-text);
}

.mocked-label {
  border-radius: 999px;
  border: 1px solid var(--cv-status-warn-border);
  background: var(--cv-white);
  color: var(--cv-status-warn-text);
  font-size: 0.66rem;
  font-weight: 600;
  padding: 0.18rem 0.45rem;
}

.canvas {
  position: relative;
  flex: 1;
  min-height: 0;
  height: 100%;
  contain: strict;
  border: 1px solid var(--cv-border-card);
  border-radius: 24px;
  background: linear-gradient(
    180deg,
    var(--cv-surface),
    var(--cv-surface-soft)
  );
  overflow: hidden;
  touch-action: none;
  cursor: default;
  box-shadow: var(--cv-shadow-card);
}

.canvas-controls-wrap {
  position: absolute;
  top: 0.58rem;
  left: 0.58rem;
  right: 0.58rem;
  z-index: 3;
  pointer-events: none;
}

.canvas-controls {
  pointer-events: auto;
  display: flex;
  align-items: center;
  gap: 0.34rem;
  flex-wrap: wrap;
  padding: 0.34rem 0.42rem;
  border-radius: 16px;
  border: 1px solid var(--cv-border-control);
  background: var(--cv-glass);
  backdrop-filter: blur(8px) saturate(120%);
  box-shadow: var(--cv-shadow-overlay);
}

.control-item {
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.project-control {
  padding: 0.18rem 0.28rem;
  border-radius: 999px;
  border: 1px solid var(--cv-border-control);
  background: var(--cv-surface-overlay);
  display: flex;
  align-items: center;
  gap: 0.3rem;
  font-size: 0.72rem;
  color: var(--cv-text-muted);
}

.app-header .project-control {
  padding: 0.1rem 0.22rem;
}

.project-control select {
  padding: 0.26rem 1.2rem 0.26rem 0.38rem;
  background-size: 0.78rem;
}

.project-control select:focus {
  outline: none;
  border-color: var(--cv-focus-border);
}

.project-control select:disabled {
  opacity: 1;
  color: var(--cv-text-muted);
  border-color: var(--cv-border-control);
  background-color: var(--cv-focus-fill);
  -webkit-text-fill-color: var(--cv-text-muted);
}

/* View Mode Control */
.view-mode-control {
  display: flex;
  align-items: center;
  gap: 0.28rem;
}

.view-mode-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--cv-text-muted);
  width: 1rem;
  height: 1rem;
}

.view-mode-select {
  padding: 0.26rem 1.8rem 0.26rem 0.38rem;
  background-size: 0.78rem;
}

.view-mode-select:focus {
  outline: none;
  border-color: var(--cv-focus-border);
}

/* Mode-specific Controls */
.mode-specific-controls {
  display: flex;
  align-items: center;
  gap: 0.3rem;
  flex-wrap: wrap;
  padding: 0.14rem 0.24rem;
  border-radius: 999px;
  background: var(--cv-surface-tint);
  box-shadow: var(--cv-shadow-soft), var(--cv-shadow-inset);
}

.mode-controls-label {
  font-size: 0.66rem;
  font-weight: 600;
  color: var(--cv-text-muted);
  padding: 0 0.2rem;
}

.mode-filter-wrap {
  background: var(--cv-surface-tint-strong);
  border-color: var(--cv-border-soft-strong);
  padding: 0.1rem 0.28rem;
}

.mode-filter-switch {
  --switch-width: 1.6rem;
  --switch-height: 0.8rem;
  --switch-padding: 0.06rem;
}

.mode-filter-label {
  display: flex;
  align-items: center;
  gap: 0.28rem;
  font-size: 0.68rem;
  font-weight: 590;
  color: var(--cv-text);
}

.mode-filter-label span {
  font-size: 0.66rem;
  color: var(--cv-text-muted);
}

.mode-filter-select {
  border-radius: 8px;
  padding: 0.18rem 1.2rem 0.18rem 0.32rem;
  font-size: 0.68rem;
  background-position: right 0.24rem center;
  background-size: 0.68rem;
}

.mode-filter-select:focus {
  outline: none;
  border-color: var(--cv-focus-border);
}

.canvas::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(
    circle at 50% 46%,
    transparent 56%,
    rgba(56, 63, 82, 0.1) 92%
  );
  filter: blur(8px);
  z-index: 0;
}

.canvas:active {
  cursor: default;
}

.graph-layer {
  position: absolute;
  inset: 0;
  width: 1800px;
  height: 1200px;
  transform-origin: top left;
  will-change: transform;
  contain: layout style;
  z-index: 1;
}

.edges {
  position: absolute;
  inset: 0;
  width: 1800px;
  height: 1200px;
  pointer-events: none;
  overflow: visible;
  shape-rendering: geometricPrecision;
  text-rendering: geometricPrecision;
}

.edges-canvas {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.edge-line {
  stroke: rgba(103, 118, 154, 0.82);
  stroke-width: 1.5;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
}

.edge-line.relative {
  filter: brightness(1.14) saturate(1.08);
}

.edge-line-glow {
  stroke: rgba(129, 151, 198, 0.36);
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
  filter: blur(0.9px);
}

.edge-label {
  fill: rgba(67, 73, 88, 0.65);
  font-size: 9px;
  text-anchor: middle;
}

.node {
  position: absolute;
  border-radius: 999px;
  border: 1px solid var(--cv-node-border);
  contain: layout style paint;
  background: var(--cv-node-bg);
  color: var(--cv-text-subtle);
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0.15rem;
  text-align: left;
  padding: 0.32rem 0.62rem;
  transition:
    border-color 130ms linear,
    transform 220ms linear,
    opacity 240ms linear;
  will-change: transform;
  cursor: default;
  box-shadow: var(--cv-shadow-node);
}

.node:hover {
  border-color: var(--cv-node-border-hover);
  filter: saturate(1.08);
}

.node:active {
  cursor: default;
}

.node.dragging {
  transition: none;
}

.node.active {
  border-color: var(--cv-node-border-active);
  background: var(--cv-node-bg-active);
  color: var(--cv-text-strong);
  box-shadow: var(--cv-shadow-node-active);
}

.node.visited {
  border-color: var(--cv-node-border-visited);
  box-shadow: 0 0 0 2px var(--cv-node-ring-visited);
}

.node.loop-bridge {
  border-color: var(--cv-node-border-loop);
  box-shadow: 0 0 0 2px var(--cv-node-ring-loop);
  background: var(--cv-node-bg-loop);
}

.node.relative {
  border-color: var(--cv-node-border-relative);
  box-shadow: 0 0 0 2px var(--cv-node-ring-relative);
}

.node.parent-main {
  border-style: dotted;
  border-width: 2px;
  font-weight: 640;
}

.node.layer {
  background: var(--cv-node-bg-layer);
}

.node.service {
  background: var(--cv-node-bg-service);
}

.node.module,
.node.file {
  background: var(--cv-node-bg-module);
}

.node.group-project {
  letter-spacing: 0.005em;
}

.node.group-docs {
  border-style: dashed;
}

.node.group-progress {
  border-style: solid;
}

.node.group-memory {
  border-width: 2px;
}

.node.group-architecture {
  border-style: double;
}

.node.group-system {
  opacity: 0.94;
}

/* Status-based styling for plan view */
.node.status-completed {
  border-color: var(--cv-node-status-completed-border);
  background: var(--cv-node-status-completed-bg);
  box-shadow:
    0 0 0 1px var(--cv-node-status-completed-ring),
    7px 7px 14px var(--cv-node-status-completed-shadow),
    var(--cv-shadow-node-highlight);
}

.node.status-in-progress {
  border-color: var(--cv-node-status-progress-border);
  background: var(--cv-node-status-progress-bg);
  box-shadow:
    0 0 0 1px var(--cv-node-status-progress-ring),
    7px 7px 14px var(--cv-node-status-progress-shadow),
    var(--cv-shadow-node-highlight);
}

.node.status-blocked {
  border-color: var(--cv-node-status-blocked-border);
  background: var(--cv-node-status-blocked-bg);
  box-shadow:
    0 0 0 1px var(--cv-node-status-blocked-ring),
    7px 7px 14px var(--cv-node-status-blocked-shadow),
    var(--cv-shadow-node-highlight);
}

.node.status-pending {
  border-color: var(--cv-node-status-pending-border);
  background: var(--cv-node-status-pending-bg);
  box-shadow:
    0 0 0 1px var(--cv-node-status-pending-ring),
    7px 7px 14px var(--cv-node-status-pending-shadow),
    var(--cv-shadow-node-highlight-soft);
}

.node.far {
  box-shadow: var(--cv-shadow-node-far);
}

.node span {
  font-weight: 600;
  line-height: 1.15;
}

.node .node-indicators {
  display: inline-flex;
  align-items: center;
  gap: 0.26rem;
  min-width: 0;
  max-width: 100%;
}

.node .node-kind-indicator,
.node .node-semantic-indicator {
  display: inline-flex;
  align-items: center;
  gap: 0.18rem;
  border-radius: 999px;
  border: 1px solid var(--cv-border-soft);
  background: var(--cv-surface-indicator);
  color: var(--cv-text-muted);
  padding: 0.08rem 0.3rem;
  min-width: 0;
}

.node .node-semantic-indicator {
  background: var(--cv-surface-indicator);
}

.node .node-indicator-icon {
  font-size: 0.56rem;
  line-height: 1;
  opacity: 0.92;
}

.node .node-indicator-text {
  font-size: 0.5rem;
  font-weight: 640;
  letter-spacing: 0.01em;
  line-height: 1;
  white-space: nowrap;
}

.node .node-label-row {
  display: inline-flex;
  align-items: center;
  gap: 0.28rem;
  min-width: 0;
  max-width: 100%;
}

.node .node-label-main {
  font-weight: 650;
  letter-spacing: 0.01em;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.node .node-label-ext {
  font-size: 0.54rem;
  font-weight: 650;
  line-height: 1;
  border-radius: 999px;
  padding: 0.1rem 0.28rem;
  background: var(--cv-surface-indicator-strong);
  border: 1px solid var(--cv-border-soft);
  color: var(--cv-text-subtle);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.76);
  white-space: nowrap;
}

.node .node-label-sub {
  font-size: 0.58rem;
  font-weight: 550;
  line-height: 1.12;
  opacity: 0.82;
  color: var(--cv-text-muted);
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.node small {
  font-size: 0.62rem;
  opacity: 0.84;
  color: var(--cv-text-muted);
}

.node .error {
  color: #915555;
}

.hint {
  margin: 0;
  font-size: 0.76rem;
  opacity: 1;
  color: var(--cv-text-muted);
  padding: 0.4rem 0.65rem;
  border: 1px solid var(--cv-line);
  border-radius: 14px;
  background: var(--cv-surface-strong);
}

.controls-panel {
  margin: 0;
  border-radius: 16px;
  border: 1px solid var(--cv-line);
  background: var(--cv-surface-strong);
  padding: 0.46rem 0.62rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.66rem;
  flex-wrap: wrap;
}

.controls-panel strong {
  font-size: 0.82rem;
  font-weight: 650;
}

.controls-panel span {
  font-size: 0.74rem;
  opacity: 1;
  color: var(--cv-text-muted);
}

.pager-controls {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.pager-controls button {
  border: 1px solid var(--cv-line-strong);
  background: var(--cv-white);
  color: var(--cv-text);
  border-radius: 999px;
  padding: 0.2rem 0.5rem;
  font-size: 0.7rem;
}

.pager-controls button:disabled {
  opacity: 0.5;
}

.error-text {
  color: #8a5252;
}
